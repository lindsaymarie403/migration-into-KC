<script src="https://d3js.org/d3.v4.min.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"><meta charset="utf-8"><style>p{margin:20px 0 0 18px}#head{font:20px 'Open Sans';font-weight:700}#sub{font:16px 'Open Sans';margin-top:5px;margin-bottom:20px}#source{font:10px 'Open Sans';margin-top:15px}.axis line,.axis path{fill:none;stroke:#000;shape-rendering:crispEdges}</style><p id="head">Moves &amp; Maternity</p><p id="sub">Kansas City Region Population Growth, 2010-2017</p><div class="chart"></div><p id="source">Source: U.S. Census Bureau (Lindsay Huth | Flatland)</p><script>var margin={top:20,right:20,bottom:40,left:100},width=600-margin.left-margin.right,height=350-margin.top-margin.bottom,svg=d3.select(".chart").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).call(responsivefy),parseDate=d3.timeParse("%Y"),x=d3.scaleTime().range([0,width]),y=d3.scaleLinear().range([height,0]),z=d3.scaleOrdinal(d3.schemeCategory10),stack=d3.stack(),area=d3.area().x(function(t,a){return x(t.data.date)}).y0(function(t){return y(t[0])}).y1(function(t){return y(t[1])}),g=svg.append("g").attr("transform","translate("+margin.left+","+margin.top+")");function type(t,a,e){t.date=parseDate(t.date);a=1;for(var r=e.length;a<r;++a)t[e[a]]=t[e[a]]/100;return t}function responsivefy(t){var a=d3.select(t.node().parentNode),e=parseInt(t.style("width")),r=parseInt(t.style("height")),n=e/r;function i(){var e=parseInt(a.style("width"));t.attr("width",e),t.attr("height",Math.round(e/n))}t.attr("viewBox","0 0 "+e+" "+r).attr("preserveAspectRatio","xMinYMid").call(i),d3.select(window).on("resize."+a.attr("id"),i)}svg.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",width).attr("height",height),d3.csv("
http://www.flatlandkc.org/assets/uploads/2018/08/graphic1.csv",function(t){t.forEach(function(t){t.date=parseDate(t.date),t.natural=+t.natural,t.migration=+t.migration});var a=t.columns.slice(1);x.domain(d3.extent(t,function(t){return t.date})),y.domain([0,14e4]),z.domain(a),stack.keys(a);var e=g.selectAll(".layer").data(stack(t)).enter().append("g").attr("class","layer");e.append("path").attr("clip-path","url(#clip)").attr("class","area").style("fill",function(t){return z(t.key)}).attr("d",area),e.filter(function(t){return t[t.length-1][1]-t[t.length-1][0]>.01}).append("text").attr("x",width-6).attr("y",function(t){return y(t[t.length-1][1])+55}).attr("dy",".35em").style("font","12px 'Open Sans'").style("text-anchor","end").text(function(t){return t.key}),g.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+height+")").style("font","11px 'Open Sans'").call(d3.axisBottom(x)),svg.append("text").attr("transform","translate("+width/1.41+" ,"+(height+margin.top+40)+")").style("text-anchor","middle").style("font","14px 'Open Sans'").text("Year"),g.append("g").attr("class","axis axis--y").style("font","11px 'Open Sans'").call(d3.axisLeft(y).ticks(6))}),svg.append("text").attr("transform","rotate(-90)").attr("y",10).attr("x",0-(height/2+20)).attr("dy","1em").style("text-anchor","middle").style("font","14px 'Open Sans'").text("Population Growth");</script>
